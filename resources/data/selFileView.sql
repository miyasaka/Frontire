SELECT
  A.FILEID
 ,A.HISTORYNO
 ,CASE
   WHEN A.HISTORYNO = 1 THEN 0 
   ELSE 1
  END AS OYAFLG
 ,A.CATEGORYID
 ,D.CATEGORYNAME
 ,A.TITLE
 ,A.EXPLANATION
 --,COALESCE(A.VERSION,'-') AS VERSION
 ,CASE
   WHEN A.VERSION IS NULL THEN '-'
   WHEN A.VERSION =  ''   THEN '-'
   ELSE A.VERSION
  END AS VERSION
 ,A.FILENAME
 ,COALESCE(E.J_EXTENSION,'不明') AS JExtension
 ,COALESCE(E.PIC,'icon_question.png') AS PIC
 ,A.DOWNLOAD
 ,A.FILESIZE
 ,A.PUBFILE
 ,A.UPDID 
 ,B.NICKNAME AS UPDNAME
 ,TO_CHAR(A.UPDDATE,'YYYYMMDDHH24MI') AS UPDDATE
 ,A.ENTID
 ,C.NICKNAME AS ENTNAME
 ,TO_CHAR(A.ENTDATE,'YYYYMMDDHH24MI') AS ENTDATE
FROM
  FILEINFO A
  LEFT OUTER JOIN MEMBERS B ON A.UPDID = B.MID
  LEFT OUTER JOIN MEMBERS C ON A.ENTID = C.MID
  LEFT OUTER JOIN MST_CATEGORY D ON A.CATEGORYID = D.CATEGORYID
  LEFT OUTER JOIN MST_EXTENSION E ON A.E_EXTENSION = E.E_EXTENSION
WHERE
     A.FILEID = /*fileid*/
ORDER BY
  OYAFLG
 ,A.HISTORYNO DESC
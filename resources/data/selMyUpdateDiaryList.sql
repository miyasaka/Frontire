SELECT
 B.DIARYID,
 B.TITLE,
 TO_CHAR(B.ENTDATE,'YYYYMMDDHH24MI') AS ENTDATE,
 COALESCE(A.CNT, 0) AS CNT
FROM
 DIARY AS B
LEFT JOIN
 (
  SELECT
   MID,
   DIARYID,
   COUNT(*) AS CNT
  FROM
   DIARY
  WHERE
   MID=/*mid*/ AND
   COMNO != 0 AND
   DELFLG = '0'
  GROUP BY MID,DIARYID
 ) AS A
ON
 B.MID = A.MID AND
 B.DIARYID = A.DIARYID
WHERE
 B.MID=/*mid*/ AND
 B.COMNO = 0 AND
 B.DELFLG = '0' 
ORDER BY B.ENTDATE DESC
SELECT
  A.FILEID
 ,A.CATEGORYID
-- ,C.CATEGORYNAME AS CATEGORYNAMEORG
 ,CASE
   WHEN LENGTH(C.CATEGORYNAME) > 7 THEN SUBSTR(C.CATEGORYNAME,0,8) || '…'
   ELSE C.CATEGORYNAME
  END AS CATEGORYNAME
 ,A.TITLE AS TITLEORG
 ,CASE
   WHEN LENGTH(A.TITLE) > 16 THEN SUBSTR(A.TITLE,0,17) || '…'
   ELSE A.TITLE
  END AS TITLE
-- ,A.EXPLANATION
-- ,A.FILENAME
 ,COALESCE(D.J_EXTENSION,'不明') AS JExtension
 ,COALESCE(D.PIC,'icon_question.png') AS PIC
 ,A.DOWNLOAD
 ,A.FILESIZE
 ,A.PUBFILE
 ,A.UPDID
-- ,B.NICKNAME AS ENTNAMEORG
 ,CASE
   WHEN LENGTH(B.NICKNAME) > 10 THEN SUBSTR(B.NICKNAME,0,11) || '…'
   ELSE B.NICKNAME
  END AS ENTNAME
 ,TO_CHAR(A.UPDDATE,'YYYYMMDDHH24MI') AS UPDDATE
 ,CASE
   WHEN TO_CHAR(A.UPDDATE,'YYYYMMDD') = TO_CHAR(CURRENT_TIMESTAMP,'YYYYMMDD') THEN '1'
   ELSE '0'
  END AS CURRENTFLG
FROM
  FILEINFO A
  LEFT OUTER JOIN MEMBERS B ON A.ENTID = B.MID
  LEFT OUTER JOIN MST_CATEGORY C ON A.CATEGORYID = C.CATEGORYID
  LEFT OUTER JOIN MST_EXTENSION D ON A.E_EXTENSION = D.E_EXTENSION
WHERE
     A.HISTORYNO = 1
 /*IF condition != null*/
 AND A.CATEGORYID = /*condition*/
 /*END*/
 /*IF sortcd == 0*/
ORDER BY A.UPDDATE DESC
 /*END*/
 /*IF sortcd == 1*/
ORDER BY A.TITLE DESC
 /*END*/
 /*IF sortcd == 2*/
ORDER BY A.TITLE ASC
 /*END*/
 /*IF sortcd == 3*/
ORDER BY C.CATEGORYNAME DESC
 /*END*/
 /*IF sortcd == 4*/
ORDER BY C.CATEGORYNAME ASC
 /*END*/
 /*IF sortcd == 5*/
ORDER BY D.J_EXTENSION DESC
 /*END*/
 /*IF sortcd == 6*/
ORDER BY D.J_EXTENSION ASC
 /*END*/
 /*IF sortcd == 7*/
ORDER BY A.UPDDATE DESC
 /*END*/
 /*IF sortcd == 8*/
ORDER BY A.UPDDATE ASC
 /*END*/
 /*IF sortcd == 9*/
ORDER BY A.DOWNLOAD DESC
 /*END*/
 /*IF sortcd == 10*/
ORDER BY A.DOWNLOAD ASC
 /*END*/
 /*IF sortcd == 11*/
ORDER BY B.NICKNAME DESC
 /*END*/
 /*IF sortcd == 12*/
ORDER BY B.NICKNAME ASC
 /*END*/
 /*IF sortcd == 13*/
ORDER BY A.FILESIZE DESC
 /*END*/
 /*IF sortcd == 14*/
ORDER BY A.FILESIZE ASC
 /*END*/